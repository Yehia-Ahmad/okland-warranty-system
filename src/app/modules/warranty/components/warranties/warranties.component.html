<app-side-nav>
    <div class="w-full flex flex-col items-start gap-8">
        <div class="w-full flex items-center justify-center">
            <h1 class="text-2xl font-bold font-azonix text-gray_light">warranty dashboard</h1>
        </div>
        <div class="w-full flex items-center justify-between">
            <div class="w-full flex items-center justify-start gap-4">
                <p-select [options]="by_dateOptions" [(ngModel)]="by_date" optionLabel="name" placeholder="By Date" class="custom-select w-32"/>
                <p-select [options]="by_dateOptions" [(ngModel)]="by_date" optionLabel="name" placeholder="By Product" class="custom-select w-max"/>
                <p-select [options]="by_dateOptions" [(ngModel)]="by_date" optionLabel="name" placeholder="By Model" class="custom-select w-max"/>
            </div>
            
            <div class="sm:w-1/5 lg:min-w-[25%] py-2 px-2 rounded-md text-gray bg-dark hidden sm:block">
                <input class="border-none outline-none focus:border-none focus:outline-none bg-transparent"
                    placeholder="Search" />
            </div>
        </div>
        <div class="w-full bg-[#1f1f1f] p-4 pb-0 rounded-xl">
            <table class="w-full border-collapse text-sm text-gray-300">
                <thead>
                    <tr class="bg-[#515151] text-gray-200 uppercase text-xs rounded-md">
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">Product</th>
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">Model</th>
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">Username</th>
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">Number</th>
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">invoice</th>
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">remining</th>
                        <th class="py-3 px-4 uppercase text-left text-[#a1a1a1]">expiry</th>
                        <th class="py-3 px-4 uppercase text-center text-[#a1a1a1]">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @for(warranty of warranties;track $index){
                    <tr class="" [ngClass]="{'border-b border-b-light_orange': $index < warranties.length - 1}">
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">{{ warranty.product }}</td>
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">{{ warranty.model }}</td>
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">{{ warranty.username }}</td>
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">{{ warranty.number }}</td>
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">
                            <img src="{{ warranty.invoice }}" alt="Invoice" class="w-16 h-16">
                        </td>
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">{{ warranty.remaining }}</td>
                        <td class="py-4 px-4 border-r border-r-[#a1a1a1] text-light_orange">{{ warranty.expiry }}</td>
                        <td class="py-4 px-4 text-center">
                            <div class="flex flex-col items-start gap-4">
                                <button
                                    class="bg-blue text-[#1f1f1f] font-semibold px-4 py-1 rounded-md mr-2"
                                    (click)="showDialog('change', warranty)">
                                    SHOW QR
                                </button>
                                <button
                                    class="bg-[#e84c0d] hover:bg-[#c43f0b] text-white font-semibold px-4 py-1 rounded-md"
                                    (click)="showDeleteDialog(warranty)">
                                    REMOVE
                                </button>
                            </div>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>

        </div>
        <!-- Pagination -->
        <div class="mx-auto">
            <p-paginator (onPageChange)="onPageChange1($event)" [first]="first1" [rows]="rows1" [totalRecords]="120"
                [showFirstLastIcon]="false" />
        </div>

    </div>
    <p-dialog [modal]="true" [(visible)]="visible" [style]="{ width: '35vw', height: '68vh' }">
        <div class="w-full h-full flex flex-col items-center justify-center gap-8">
            <div class="w-full flex flex-col items-center">
                <span class="font-semibold text-lg leading-7 tracking-wider text-light_orange">Product Name</span>
                <div class="w-full flex items-center justify-center rounded-md py-4 font-bold text-2xl leading-7 tracking-wide font-roboto text-orange bg-[#1f1f1f]">
                    Android HD
                </div>
            </div>
            <div class="w-full flex flex-col items-center">
                <span class="font-semibold text-lg leading-7 tracking-wider text-light_orange">Modal</span>
                <div class="w-full flex items-center justify-center rounded-md py-4 font-bold text-2xl leading-7 tracking-wide font-roboto text-gray_light bg-[#1f1f1f]">
                    MTK 9INCH 2-32
                </div>
            </div>
            <img src="img/qr.png" alt="qr" class="w-64 h-64 object-cover">
        </div>
    </p-dialog>
    <p-dialog [(visible)]="deleteVisible" styleClass="!border-0">
        <ng-template #headless>
            <div class="flex flex-col px-8 py-8 gap-6 rounded-2xl bg-[#393939]">
                <div class="w-full flex items-center justify-center">
                    <app-warn></app-warn>
                </div>
                <div class="flex items-center justify-center">
                    <h1 class="text-4xl font-bold font-azonix text-orange">delete warranty</h1>
                </div>
                <h6 class="text-lg font-semibold font-roboto text-light_orange">Are you sure you want to delete this
                    warranty invoice ?</h6>
                <div class="w-max mx-auto my-2 px-10 py-4 flex flex-col items-center justify-center rounded-md bg-[#1f1f1f]">
                    <span class="font-light text-base leading-7 tracking-wider text-orange">warranty expiries on</span>
                    <span class="font-semibold text-4xl leading-7 tracking-wider text-blue">27/9/2026</span>
                </div>
                <div class="flex items-center gap-4">
                    <p-button label="No Cancel" (click)="closeDialog()" [text]="true"
                        styleClass="!p-4 w-full !uppercase !text-xl !font-bold !text-gray_dark !bg-orange !font-roboto !border !border-white/30"
                        class="w-full" />
                    <p-button label="Yes Delete" (click)="closeDialog()" [text]="true"
                        styleClass="!p-4 w-full !uppercase !text-xl !font-bold !text-light_orange !bg-red !font-roboto !border !border-white/30"
                        class="w-full" />
                </div>
            </div>
        </ng-template>
    </p-dialog>
</app-side-nav>